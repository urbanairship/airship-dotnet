task clean(type: Delete) {
  doLast() {
    project.delete "bin"
    project.delete "obj"
  }
}

task build {
  dependsOn(':src:Airship.Net:build', ':binderator:build', ':src:AirshipBindings.iOS.common:build')

   def BuildConfiguration=project.properties['build_configuration'] ?: "Release"
    doLast() {
      exec {
        commandLine "dotnet", "build", "--configuration=${BuildConfiguration}", "Airship.Net.MessageCenter.csproj"
      }
    }
}


task pack {
    dependsOn(':src:Airship.Net:pack')
    // With .NET8, we apparently need to pack the bindings after the cross-platform nupkgs...
    finalizedBy(':binderator:pack', ':src:AirshipBindings.iOS.common:pack')

    // Pack Airship.Net.MessageCenter library
    doLast() {
      exec {
        commandLine "dotnet", "pack", "Airship.Net.MessageCenter.csproj", "-o=${rootProject.buildDir}"
      }
    }
}